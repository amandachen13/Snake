{"version":3,"sources":["webpack:///webpack/bootstrap 3c09f5a67651be301c22","webpack:///./lib/coord.js","webpack:///./lib/snake-view.js","webpack:///./lib/apple.js","webpack:///./lib/board.js","webpack:///./lib/main.js","webpack:///./lib/snake.js"],"names":[],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA,mDAA2C,cAAc;;AAEzD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAK;AACL;AACA;;AAEA;AACA;AACA;AACA,mCAA2B,0BAA0B,EAAE;AACvD,yCAAiC,eAAe;AAChD;AACA;AACA;;AAEA;AACA,8DAAsD,+DAA+D;;AAErH;AACA;;AAEA;AACA;;;;;;;AChEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;;;;;;ACnBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,mBAAmB,oBAAoB;AACvC;AACA,qBAAqB,oBAAoB;AACzC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,gCAAgC,iBAAiB;;AAEjD;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;AC/EA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;;;;;;ACxBA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;;;;;;;ACtBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH,CAAC;;;;;;;ACVD;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,8BAA8B;AACjD;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA,mBAAmB,0BAA0B;AAC7C;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA","file":"./lib/bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 4);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 3c09f5a67651be301c22","class Coord {\n  constructor(x, y) {\n    this.x = x;\n    this.y = y;\n  }\n\n  plus(coord2) {\n    return new Coord(this.x + coord2.x, this.y + coord2.y);\n  }\n\n  equals(coord2) {\n    return (this.x === coord2.x) && (this.y === coord2.y);\n  }\n\n  isOpposite(coord2) {\n    return (this.x === (-1 * coord2.x)) && (this.y === (-1 * coord2.y));\n  }\n}\n\nmodule.exports = Coord;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/coord.js\n// module id = 0\n// module chunks = 0","const Board = require('./board');\n\nclass View {\n  constructor($el) {\n    this.$el = $el;\n    this.board = new Board(20);\n    this.setGrid();\n    this.render();\n    this.initialized = false;\n\n    $l(window).on(\"keydown\", this.handleKey.bind(this));\n  }\n\n  step() {\n    if (this.board.snake.segments.length > 0) {\n      this.board.snake.move();\n      this.render();\n    } else {\n      alert(\"You lose!\");\n      window.clearInterval(this.interval);\n    }\n  }\n\n  handleKey(e) {\n    if (View.KEYS[e.keyCode]) {\n      e.preventDefault();\n      if (!this.initialized) {\n        this.interval = window.setInterval(this.step.bind(this), 100);\n        this.initialized = true;\n      }\n      this.board.snake.turn(View.KEYS[e.keyCode]);\n    }\n  }\n\n  setGrid() {\n    let html = \"\";\n\n    for (let x = 0; x < this.board.dim; x ++) {\n      html += \"<ul>\";\n      for (let y = 0; y < this.board.dim; y++) {\n        html += \"<li></li>\";\n      }\n      html += \"</ul>\";\n    }\n\n    this.$el.html(html);\n    this.$li = $l(\"li\");\n  }\n\n  render() {\n    $l(\".snake\").removeClass(\"snake\");\n    $l(\".apple\").removeClass(\"apple\");\n    $l(\".score\").html(`Score: ${this.board.score}`);\n\n    this.board.snake.segments.forEach( (segment) => {\n      this.updateClass(segment, \"snake\");\n    });\n    this.updateClass(this.board.apple.position, \"apple\");\n  }\n\n  updateClass(coord, className) {\n    const row = coord.x;\n    const col = coord.y;\n    this.$li.select(row * this.board.dim + col).addClass(className);\n  }\n\n  reset() {\n\n  }\n\n}\n\nView.KEYS = {\n  38: \"N\",\n  39: \"E\",\n  40: \"S\",\n  37: \"W\",\n}\n\nmodule.exports = View;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/snake-view.js\n// module id = 1\n// module chunks = 0","const Coord = require('./coord');\n\nclass Apple {\n  constructor(board) {\n    this.board = board;\n    this.position = null;\n    this.place();\n  }\n\n  place() {\n    // can't place apple on a snake segment\n    while (this.position === null ||\n           this.board.snake.isOccupying(this.position)) {\n      const x = Math.floor(Math.random() * this.board.dim);\n      const y = Math.floor(Math.random() * this.board.dim);\n      this.position = new Coord(x, y);\n    }\n\n  }\n\n}\n\nApple.SYMBOL = \"A\";\n\nmodule.exports = Apple;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/apple.js\n// module id = 2\n// module chunks = 0","const Snake = require('./snake');\nconst Apple = require('./apple');\n\nclass Board {\n  constructor(dim) {\n    this.dim = dim;\n\n    this.snake = new Snake(this);\n    this.apple = new Apple(this);\n\n    this.score = 0;\n  }\n\n  validPosition(coord) {\n    return (coord.x >= 0) && (coord.x < this.dim)\n      && (coord.y >= 0) && (coord.y < this.dim);\n  }\n\n}\n\nBoard.BLANK_SYMBOL = \".\";\n\nmodule.exports = Board;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/board.js\n// module id = 3\n// module chunks = 0","const View = require ('./snake-view');\n\n$l( () => {\n  const root = $l('.snake-game');\n  let view = new View(root);\n  $l('.fa-rotate-left').on(\"click\", () => {\n    if (view.board.snake.segments.length === 0) {\n      view = new View(root)\n    }\n  });\n});\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/main.js\n// module id = 4\n// module chunks = 0","const Coord = require('./coord');\n\nclass Snake {\n  constructor(board) {\n    this.direction = \"N\";\n    this.turning = false;\n    this.board = board;\n\n    const center = new Coord(Math.floor(board.dim / 2), Math.floor(board.dim / 2));\n    this.segments = [center];\n\n    this.growing = 0;\n  }\n\n  head() {\n    return this.segments.slice(-1)[0];\n  }\n\n  move() {\n    // move snake\n    this.segments.push(this.head().plus(Snake.DIR[this.direction]));\n\n    // allow turning\n    this.turning = false;\n\n    // eat apple\n    if (this.eatApple()) {\n      this.board.apple.place();\n    }\n\n    // if snake is not growing, remove tail\n    if (this.growing > 0) {\n      this.growing -= 1;\n    } else {\n      this.segments.shift();\n    }\n\n    // destroy snake if not valid\n    if (!this.isValid()) {\n      this.segments = [];\n    }\n  }\n\n  eatApple() {\n    if (this.head().equals(this.board.apple.position)) {\n      this.growing += 2;\n      this.board.score += this.segments.length;\n      return true;\n    } else {\n      return false;\n    }\n  }\n\n  isValid() {\n    const head = this.head();\n\n    // return false if snake goes off the board\n    if (!this.board.validPosition(head)) {\n      return false;\n    }\n\n    // return false if snake eats itself\n    for (let i = 0; i < this.segments.length - 1; i++) {\n      if (this.segments[i].equals(head)) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  turn(newDirection) {\n    if (this.turning || Snake.DIR[this.direction].isOpposite(Snake.DIR[newDirection])) {\n      return;\n    } else {\n      this.turning = true;\n      this.direction = newDirection;\n    }\n  }\n\n  isOccupying(position) {\n    for (let i = 0; i < this.segments.length; i++) {\n      if (this.segments[i].equals(position)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n\n}\n\nSnake.DIR = {\n  \"N\": new Coord(0, -1),\n  \"E\": new Coord(1, 0),\n  \"S\": new Coord(0, 1),\n  \"W\": new Coord(-1, 0)\n}\n\nSnake.SYMBOL = \"S\";\n\nmodule.exports = Snake;\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./lib/snake.js\n// module id = 5\n// module chunks = 0"],"sourceRoot":""}